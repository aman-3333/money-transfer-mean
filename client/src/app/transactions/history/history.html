<div class="container">
    <button mat-button routerLink="/dashboard" class="back-btn">
        <mat-icon>arrow_back</mat-icon> Back to Dashboard
    </button>

    <mat-card class="history-card gradient-card">
        <mat-card-header class="card-header-gradient">
            <div class="header-content">
                <mat-icon class="header-icon">history</mat-icon>
                <mat-card-title class="gradient-title">Transaction History</mat-card-title>
            </div>
        </mat-card-header>
        <mat-card-content class="card-content">
            <div class="table-container">
                <table mat-table [dataSource]="dataSource" class="glass-table">

                    <ng-container matColumnDef="timestamp">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon class="col-icon">schedule</mat-icon> Date
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.createdAt | date:'medium'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="type">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon class="col-icon">category</mat-icon> Type
                        </th>
                        <td mat-cell *matCellDef="let element">
                            <span class="type-badge" [ngClass]="element.type">{{element.type}}</span>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="sender">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon class="col-icon">arrow_upward</mat-icon> Sender
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.sender?.username || 'System'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="receiver">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon class="col-icon">arrow_downward</mat-icon> Receiver
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.receiver?.username || 'System'}} </td>
                    </ng-container>

                    <ng-container matColumnDef="amount">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon class="col-icon">attach_money</mat-icon> Amount
                        </th>
                        <td mat-cell *matCellDef="let element" class="amount-cell">
                            {{element.amount | currency:'USD'}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="description">
                        <th mat-header-cell *matHeaderCellDef>
                            <mat-icon class="col-icon">description</mat-icon> Description
                        </th>
                        <td mat-cell *matCellDef="let element"> {{element.description}} </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>
                </table>
            </div>

            <div *ngIf="dataSource.length === 0" class="no-data">
                <mat-icon>inbox</mat-icon>
                <p>No transactions found.</p>
            </div>
        </mat-card-content>
    </mat-card>
</div>